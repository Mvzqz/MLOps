schema: '2.0'
stages:
  clean:
    cmd: python src/mlops_pruebas/data/clean_data.py 
      data/raw/seoul_bike_sharing_modified.csv 
      data/clean/clean_seoul_bike_data.csv
    deps:
    - path: data/raw/seoul_bike_sharing_modified.csv
      hash: md5
      md5: 0666539abbace0cc2c12df17b06046d9
      size: 771920
    - path: src/mlops_pruebas/data/clean_data.py
      hash: md5
      md5: adde4a517fade599e10ccfe53090bf84
      size: 3439
    outs:
    - path: data/clean/clean_seoul_bike_data.csv
      hash: md5
      md5: a01a780c8cb1958d1f29ca64cf97ca1b
      size: 762811
  features:
    cmd: poetry run python -m mlops.features
    deps:
    - path: data/interim/seoul_bike_sharing_cleaned.csv
      hash: md5
      md5: ce45aa3fd7a2363439fb6858343c5b85
      size: 689691
    - path: mlops/features.py
      hash: md5
      md5: 9b6dafe1b47d7db6c05c0399a8f099fb
      size: 5289
    outs:
    - path: data/processed/seoul_bike_sharing_featured.csv
      hash: md5
      md5: 9d53eff1ab46ac374524ddf2e70d2eba
      size: 1878804
  dataset:
    cmd: poetry run python -m mlops.dataset
    deps:
    - path: data/raw/seoul_bike_sharing.csv
      hash: md5
      md5: 0666539abbace0cc2c12df17b06046d9
      size: 771920
    - path: mlops/dataset.py
      hash: md5
      md5: a97cbd438c0db0b28ea73ff9898ee4e6
      size: 5252
    outs:
    - path: data/interim/seoul_bike_sharing_cleaned.csv
      hash: md5
      md5: ce45aa3fd7a2363439fb6858343c5b85
      size: 689691
  train:
    cmd: poetry run python run_experiments.py
    deps:
    - path: data/processed/seoul_bike_sharing_featured.csv
      hash: md5
      md5: 9d53eff1ab46ac374524ddf2e70d2eba
      size: 1878804
    - path: experiments.yaml
      hash: md5
      md5: 0d561a82af999adc926be9f044bb82bb
      size: 540
    - path: mlops/modeling/train.py
      hash: md5
      md5: 3adf771dd69fb031e54e4e91f087497c
      size: 11365
    - path: run_experiments.py
      hash: md5
      md5: 9fa38688523ffc90ffcc1a7a199a9324
      size: 1861
  predict:
    cmd: poetry run python -m mlops.modeling.predict
    deps:
    - path: mlops/modeling/predict.py
      hash: md5
      md5: 5604d5cf39658fef88662e67177150dc
      size: 4191
    - path: models/best_model.pkl
      hash: md5
      md5: 5e478e4556ea1576841818afcd781b5b
      size: 441551
    outs:
    - path: data/processed/test_predictions.csv
      hash: md5
      md5: 317df9e0f4159b0b968f0f5620a2f69f
      size: 196659
  plots:
    cmd: poetry run python -m mlops.plots
    deps:
    - path: data/processed/seoul_bike_sharing_featured.csv
      hash: md5
      md5: 9d53eff1ab46ac374524ddf2e70d2eba
      size: 1878804
    - path: data/processed/test_predictions.csv
      hash: md5
      md5: 317df9e0f4159b0b968f0f5620a2f69f
      size: 196659
    - path: mlops/plots.py
      hash: md5
      md5: 6dab63d5169a87cfe51e772d704b26d4
      size: 4042
    - path: models/best_model.pkl
      hash: md5
      md5: 5e478e4556ea1576841818afcd781b5b
      size: 441551
    outs:
    - path: reports/figures/correlation_heatmap.png
      hash: md5
      md5: 6c73ab8f9576abb8cadafb0701812e00
      size: 529061
    - path: reports/figures/demand_by_hour.png
      hash: md5
      md5: 61e82cb809da2953b450c9c039d3e06f
      size: 26305
    - path: reports/figures/target_distribution.png
      hash: md5
      md5: 90401164da1df66c307b05f85290e6d7
      size: 28116
  promote_model:
    cmd: poetry run python run_promote_model.py
    deps:
    - path: run_promote_model.py
      hash: md5
      md5: 5158274c5a026a54a0f157752711dee8
      size: 1883
    outs:
    - path: models/best_model.pkl
      hash: md5
      md5: 5e478e4556ea1576841818afcd781b5b
      size: 441551
