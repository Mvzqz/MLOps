schema: '2.0'
stages:
  clean:
    cmd: python src/mlops_pruebas/data/clean_data.py 
      data/raw/seoul_bike_sharing_modified.csv 
      data/clean/clean_seoul_bike_data.csv
    deps:
    - path: data/raw/seoul_bike_sharing_modified.csv
      hash: md5
      md5: 0666539abbace0cc2c12df17b06046d9
      size: 771920
    - path: src/mlops_pruebas/data/clean_data.py
      hash: md5
      md5: adde4a517fade599e10ccfe53090bf84
      size: 3439
    outs:
    - path: data/clean/clean_seoul_bike_data.csv
      hash: md5
      md5: a01a780c8cb1958d1f29ca64cf97ca1b
      size: 762811
  features:
    cmd: poetry run python -m mlops.features
    deps:
    - path: data/interim/seoul_bike_sharing_cleaned.csv
      hash: md5
      md5: 084adb5225159ba173e89949ecf1a3b6
      size: 697797
    - path: mlops/features.py
      hash: md5
      md5: 22a0c0cedcb3437a1c0f45c509374505
      size: 5969
    outs:
    - path: data/processed/seoul_bike_sharing_featured.csv
      hash: md5
      md5: ebdaa47fbf51897cbe482155eaa8cf7c
      size: 1885388
  dataset:
    cmd: poetry run python -m mlops.dataset
    deps:
    - path: data/raw/seoul_bike_sharing.csv
      hash: md5
      md5: 0666539abbace0cc2c12df17b06046d9
      size: 771920
    - path: mlops/dataset.py
      hash: md5
      md5: 3f1f58de970e920ba1c8b11df85e23cf
      size: 5006
    outs:
    - path: data/interim/seoul_bike_sharing_cleaned.csv
      hash: md5
      md5: 084adb5225159ba173e89949ecf1a3b6
      size: 697797
  train:
    cmd: poetry run python run_experiments.py
    deps:
    - path: data/processed/seoul_bike_sharing_featured.csv
      hash: md5
      md5: ebdaa47fbf51897cbe482155eaa8cf7c
      size: 1885388
    - path: experiments.yaml
      hash: md5
      md5: f3c3a54a71cf4b10fd759cfa6d0224a6
      size: 570
    - path: mlops/modeling/train.py
      hash: md5
      md5: 33ab67ad35f28f5e50c74fd844bc1d44
      size: 11115
    - path: run_experiments.py
      hash: md5
      md5: 7eeb2514262cc04cfe4fac7b99c631b9
      size: 1982
  predict:
    cmd: poetry run python -m mlops.modeling.predict
    deps:
    - path: mlops/modeling/predict.py
      hash: md5
      md5: 8a1fc7cbe3dc2e702a684ab86eddfc8e
      size: 3252
    - path: models/best_model.pkl
      hash: md5
      md5: 2836718fc625116191a178fa46e1ee00
      size: 454139
    outs:
    - path: data/processed/test_predictions.csv
      hash: md5
      md5: bdad401a6b15cfa8f926d8d7b1fe2784
      size: 160425
  plots:
    cmd: poetry run python -m mlops.plots
    deps:
    - path: data/processed/seoul_bike_sharing_featured.csv
      hash: md5
      md5: ebdaa47fbf51897cbe482155eaa8cf7c
      size: 1885388
    - path: data/processed/test_predictions.csv
      hash: md5
      md5: bdad401a6b15cfa8f926d8d7b1fe2784
      size: 160425
    - path: mlops/plots.py
      hash: md5
      md5: d2d61f3eedf11db0311256f5058348cf
      size: 4153
    - path: models/best_model.pkl
      hash: md5
      md5: 2836718fc625116191a178fa46e1ee00
      size: 454139
    outs:
    - path: reports/figures/correlation_heatmap.png
      hash: md5
      md5: 6c73ab8f9576abb8cadafb0701812e00
      size: 529061
    - path: reports/figures/demand_by_hour.png
      hash: md5
      md5: 61e82cb809da2953b450c9c039d3e06f
      size: 26305
    - path: reports/figures/target_distribution.png
      hash: md5
      md5: 90401164da1df66c307b05f85290e6d7
      size: 28116
  promote_model:
    cmd: poetry run python run_promote_model.py
    deps:
    - path: run_promote_model.py
      hash: md5
      md5: f8b8c395be8ca3f30e3c8bb7ae9b0f7a
      size: 2016
    outs:
    - path: models/best_model.pkl
      hash: md5
      md5: 2836718fc625116191a178fa46e1ee00
      size: 454139
