schema: '2.0'
stages:
  clean:
    cmd: python src/mlops_pruebas/data/clean_data.py 
      data/raw/seoul_bike_sharing_modified.csv 
      data/clean/clean_seoul_bike_data.csv
    deps:
    - path: data/raw/seoul_bike_sharing_modified.csv
      hash: md5
      md5: 0666539abbace0cc2c12df17b06046d9
      size: 771920
    - path: src/mlops_pruebas/data/clean_data.py
      hash: md5
      md5: adde4a517fade599e10ccfe53090bf84
      size: 3439
    outs:
    - path: data/clean/clean_seoul_bike_data.csv
      hash: md5
      md5: a01a780c8cb1958d1f29ca64cf97ca1b
      size: 762811
  features:
    cmd: poetry run python -m mlops.features
    deps:
    - path: data/interim/seoul_bike_sharing_cleaned.csv
      hash: md5
      md5: 084adb5225159ba173e89949ecf1a3b6
      size: 697797
    - path: mlops/features.py
      hash: md5
      md5: c689317b5a3103222eb5ef3ffe4e19f8
      size: 6081
    outs:
    - path: data/processed/seoul_bike_sharing_featured.csv
      hash: md5
      md5: ebdaa47fbf51897cbe482155eaa8cf7c
      size: 1885388
  dataset:
    cmd: poetry run python -m mlops.dataset
    deps:
    - path: data/raw/seoul_bike_sharing.csv
      hash: md5
      md5: 0666539abbace0cc2c12df17b06046d9
      size: 771920
    - path: mlops/dataset.py
      hash: md5
      md5: 6a58294174699bdf3029ae0ca017f318
      size: 4826
    outs:
    - path: data/interim/seoul_bike_sharing_cleaned.csv
      hash: md5
      md5: 084adb5225159ba173e89949ecf1a3b6
      size: 697797
  train:
    cmd: poetry run python run_experiments.py
    deps:
    - path: data/processed/seoul_bike_sharing_featured.csv
      hash: md5
      md5: ebdaa47fbf51897cbe482155eaa8cf7c
      size: 1885388
    - path: experiments.yaml
      hash: md5
      md5: 7fb0d15064c133fac38244a9030554ff
      size: 560
    - path: mlops/modeling/train.py
      hash: md5
      md5: 3fc90c7271d4041cc3f7bac01ed5c41a
      size: 11466
    - path: run_experiments.py
      hash: md5
      md5: ca0e228672e1118901fdd2da2ae707dc
      size: 1921
  predict:
    cmd: poetry run python -m mlops.modeling.predict
    deps:
    - path: mlops/modeling/predict.py
      hash: md5
      md5: e5a1bb52b91262aa6abef15b1bf6958d
      size: 3150
    - path: models/best_model.pkl
      hash: md5
      md5: fd9687a64cb6f975837904723406b4b2
      size: 454139
    outs:
    - path: data/processed/test_predictions.csv
      hash: md5
      md5: bdad401a6b15cfa8f926d8d7b1fe2784
      size: 160425
  plots:
    cmd: poetry run python -m mlops.plots
    deps:
    - path: data/processed/seoul_bike_sharing_featured.csv
      hash: md5
      md5: ebdaa47fbf51897cbe482155eaa8cf7c
      size: 1885388
    - path: data/processed/test_predictions.csv
      hash: md5
      md5: bdad401a6b15cfa8f926d8d7b1fe2784
      size: 160425
    - path: mlops/plots.py
      hash: md5
      md5: d2d61f3eedf11db0311256f5058348cf
      size: 4153
    - path: models/best_model.pkl
      hash: md5
      md5: fd9687a64cb6f975837904723406b4b2
      size: 454139
    outs:
    - path: reports/figures/correlation_heatmap.png
      hash: md5
      md5: 6c73ab8f9576abb8cadafb0701812e00
      size: 529061
    - path: reports/figures/demand_by_hour.png
      hash: md5
      md5: 61e82cb809da2953b450c9c039d3e06f
      size: 26305
    - path: reports/figures/target_distribution.png
      hash: md5
      md5: 90401164da1df66c307b05f85290e6d7
      size: 28116
  promote_model:
    cmd: poetry run python run_promote_model.py
    deps:
    - path: run_promote_model.py
      hash: md5
      md5: a0a8e2ff5d5ca71c6b70a72a1205da1e
      size: 1941
    outs:
    - path: models/best_model.pkl
      hash: md5
      md5: fd9687a64cb6f975837904723406b4b2
      size: 454139
